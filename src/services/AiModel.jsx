import {
  GoogleGenerativeAI,
  HarmCategory,
  HarmBlockThreshold,
} from "@google/generative-ai";

const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget, Give me a Hotels options list with HotelNage, Hotel address, Price, hotel image urt, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: 'Okay, here\'s a JSON-formatted travel plan for a budget-friendly 3-day trip to Las Vegas for a couple.  I\'ll include hotel options, a detailed itinerary, and other helpful information.\n\n```json\n{\n  "tripName": "Las Vegas Budget Getaway (3 Days/2 Nights)",\n  "travelers": "Couple",\n  "budget": "Cheap",\n  "dates": "Flexible (Example: November 3rd - November 5th)",\n  "currency": "USD",\n  "hotels": [\n    {\n      "hotelName": "Circus Circus Hotel & Casino",\n      "hotelAddress": "2880 S Las Vegas Blvd, Las Vegas, NV 89109",\n      "priceRange": "$30 - $80 per night (depending on season and availability)",\n      "hotelImageUrl": "https://www.circuscircus.com/wp-content/uploads/2019/04/Circus-Circus-Hotel-Pool-Area-1.jpg",\n      "geoCoordinates": {\n        "latitude": 36.1295,\n        "longitude": -115.1642\n      },\n      "rating": 3.5,\n      "description": "Affordable option with a circus theme, free circus acts, and a large amusement park. Can be a bit dated, but good for families and budget travelers.  On the north end of the Strip.",\n      "amenities": ["Pool", "Casino", "Restaurants", "Amusement Park", "Free Circus Acts"]\n    },\n    {\n      "hotelName": "Excalibur Hotel & Casino",\n      "hotelAddress": "3850 S Las Vegas Blvd, Las Vegas, NV 89109",\n      "priceRange": "$40 - $90 per night (depending on season and availability)",\n      "hotelImageUrl": "https://www.excalibur.com/content/dam/eclv/page-slices/2023/renovated-rooms/eclv-updated-room-king-slice.jpg",\n      "geoCoordinates": {\n        "latitude": 36.0957,\n        "longitude": -115.1740\n      },\n      "rating": 4.0,\n      "description": "Medieval-themed hotel at the south end of the Strip.  More modern than Circus Circus, and usually a good value. Close to many attractions.",\n      "amenities": ["Pool", "Casino", "Restaurants", "Shows", "Shopping"]\n    },\n    {\n      "hotelName": "Linq Hotel & Casino",\n      "hotelAddress": "3535 S Las Vegas Blvd, Las Vegas, NV 89109",\n      "priceRange": "$50 - $120 per night (depending on season and availability)",\n      "hotelImageUrl": "https://www.caesars.com/content/dam/linq/hotel/hotel-gallery/the-linq-hotel-room-deluxe-king-new-01.jpg",\n      "geoCoordinates": {\n        "latitude": 36.1171,\n        "longitude": -115.1692\n      },\n      "rating": 4.2,\n      "description": "Modern hotel in a great central location on the Strip, right next to the High Roller observation wheel.  Usually a bit pricier than the other options, but offers a good balance of price and location.",\n      "amenities": ["Pool", "Casino", "Restaurants", "Shopping", "High Roller"]\n    }\n  ],\n  "itinerary": {\n    "day1": {\n      "theme": "Exploring the South Strip & Free Attractions",\n      "bestTimeToVisit": "Morning to Evening",\n      "activities": [\n        {\n          "placeName": "Welcome to Las Vegas Sign",\n          "placeDetails": "Iconic photo opportunity.  There\'s often a line, so go early.",\n          "placeImageUrl": "https://www.lasvegasnevada.gov/wp-content/uploads/2023/04/Welcome-to-Las-Vegas-Sign-678x452.jpg",\n          "geoCoordinates": {\n            "latitude": 36.0826,\n            "longitude": -115.1734\n          },\n          "ticketPricing": "Free",\n          "travelTimeFromHotel": "15-25 minutes (depending on hotel and transportation)",\n          "duration": "30-60 minutes"\n        },\n        {\n          "placeName": "Bellagio Conservatory & Botanical Garden",\n          "placeDetails": "Stunning floral displays that change seasonally. Free to enter.",\n          "placeImageUrl": "https://www.bellagio.com/content/dam/mgm/bellagio/entertainment/conservatory/bellagio-conservatory-autumn-2023-teaser.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1127,\n            "longitude": -115.1763\n          },\n          "ticketPricing": "Free",\n          "travelTimeFromPrevious": "15-20 minutes (walking)",\n          "duration": "1-2 hours",\n          "bestTimeToVisit": "Mid-morning to avoid crowds"\n        },\n        {\n          "placeName": "Bellagio Fountains",\n          "placeDetails": "Spectacular free water show choreographed to music.  Shows every 30 minutes in the afternoon and every 15 minutes in the evening.",\n          "placeImageUrl": "https://www.bellagio.com/content/dam/mgm/bellagio/entertainment/fountains-of-bellagio/fountains-of-bellagio-evening-teaser.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1127,\n            "longitude": -115.1763\n          },\n          "ticketPricing": "Free",\n          "travelTimeFromPrevious": "Located outside the Conservatory",\n          "duration": "30-60 minutes (watching a few shows)",\n          "bestTimeToVisit": "Evening for the best atmosphere"\n        },\n        {\n          "placeName": "Explore the Strip (Walk)",\n          "placeDetails": "Walk the south end of the Strip, taking in the sights and sounds.  Window shop, people watch, and enjoy the atmosphere.",\n          "placeImageUrl": "https://i.insider.com/5e6d566c906c572727375132?width=1200&format=jpeg",\n          "geoCoordinates": {\n            "latitude": 36.1070,\n            "longitude": -115.1739\n          },\n          "ticketPricing": "Free",\n          "travelTimeFromPrevious": "Walking between attractions",\n          "duration": "2-3 hours",\n          "bestTimeToVisit": "Any time of day, but evenings are more lively"\n        },\n         {\n          "placeName": "High Roller Observation Wheel at The LINQ",\n          "placeDetails": "A giant observation wheel that offers amazing views of Las Vegas. The ride lasts 30 minutes.",\n          "placeImageUrl": "https://www.caesars.com/content/dam/clv/dining/high-roller-observation-wheel/overview/clv-high-roller-observation-wheel-ext-1080x1920.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1167,\n            "longitude": -115.1692\n          },\n          "ticketPricing": "$23 during the day and $35 at night",\n          "travelTimeFromPrevious": "20 minutes (by bus from South strip)",\n          "duration": "1-2 hours",\n          "bestTimeToVisit": "Evening for the best atmosphere"\n        }\n      ]\n    },\n    "day2": {\n      "theme": "Downtown Las Vegas & Fremont Street Experience",\n      "bestTimeToVisit": "Afternoon to Late Night",\n      "activities": [\n        {\n          "placeName": "Fremont Street Experience",\n          "placeDetails": "Light and sound show projected onto a canopy over Fremont Street. Free to enter.",\n          "placeImageUrl": "https://vegasexperience.com/wp-content/uploads/2021/02/fremont-street-experience-downtown-las-vegas-night-4k.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1703,\n            "longitude": -115.1424\n          },\n          "ticketPricing": "Free",\n          "travelTimeFromHotel": "30-45 minutes (by bus or rideshare)",\n          "duration": "2-3 hours",\n          "bestTimeToVisit": "Evening/Night for shows (start at dusk)"\n        },\n        {\n          "placeName": "SlotZilla Zip Line",\n          "placeDetails": "Zip line experience over Fremont Street.",\n          "placeImageUrl": "https://vegasexperience.com/wp-content/uploads/2021/02/slotzilla-zip-line-fremont-street-experience.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1703,\n            "longitude": -115.1424\n          },\n          "ticketPricing": "$39-$49 depending on the line.",\n          "travelTimeFromPrevious": "Located on Fremont Street",\n          "duration": "1-2 hours (including wait time)",\n          "bestTimeToVisit": "Evening/Night"\n        },\n        {\n          "placeName": "Mob Museum",\n          "placeDetails": "Museum dedicated to the history of organized crime in the US.  Can be pricey, but interesting.",\n          "placeImageUrl": "https://themobmuseum.org/wp-content/uploads/2018/11/mob-museum-exterior-at-night.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1712,\n            "longitude": -115.1406\n          },\n          "ticketPricing": "$29.95 per person",\n          "travelTimeFromPrevious": "5-10 minutes (walking)",\n          "duration": "2-3 hours",\n          "bestTimeToVisit": "Afternoon"\n        },\n        {\n          "placeName": "Container Park",\n          "placeDetails": "Shopping and dining complex made out of repurposed shipping containers.  Unique and fun atmosphere.",\n          "placeImageUrl": "https://downtowncontainerpark.com/wp-content/uploads/2023/08/DCP-02.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1679,\n            "longitude": -115.1419\n          },\n          "ticketPricing": "Free to enter (costs for food/shopping)",\n          "travelTimeFromPrevious": "5-10 minutes (walking)",\n          "duration": "1-2 hours",\n          "bestTimeToVisit": "Evening"\n        }\n      ]\n    },\n    "day3": {\n      "theme": "Relaxing & Departure",\n      "bestTimeToVisit": "Morning",\n      "activities": [\n        {\n          "placeName": "Pool Time",\n          "placeDetails": "Enjoy the hotel pool.  Relax and soak up the sun.",\n          "placeImageUrl": "https://media.cntraveler.com/photos/63182146551e44281260a19f/master/w_3840%2Cc_limit/Pools-Las-Vegas-07-Mandalay-Bay.jpg",\n          "geoCoordinates": {\n            "latitude": null,\n            "longitude": null\n          },\n          "ticketPricing": "Free (if staying at the hotel)",\n          "travelTimeFromHotel": "N/A",\n          "duration": "2-3 hours",\n          "bestTimeToVisit": "Morning/Early Afternoon"\n        },\n        {\n          "placeName": "Last-Minute Souvenir Shopping",\n          "placeDetails": "Pick up any last-minute souvenirs at shops on the Strip or in your hotel.",\n          "placeImageUrl": "https://media.cntraveler.com/photos/598c3358a0f3b00ef9405550/master/w_2240,c_limit/las-vegas-souvenirs-GettyImages-515945832.jpg",\n          "geoCoordinates": {\n            "latitude": null,\n            "longitude": null\n          },\n          "ticketPricing": "Varies",\n          "travelTimeFromHotel": "Walking distance",\n          "duration": "1-2 hours",\n          "bestTimeToVisit": "Morning/Early Afternoon"\n        },\n        {\n          "placeName": "Departure",\n          "placeDetails": "Head to the airport for your flight home.",\n          "placeImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/8/82/Harry_Reid_International_Airport_LAS.jpg/640px-Harry_Reid_International_Airport_LAS.jpg",\n          "geoCoordinates": {\n            "latitude": 36.0801,\n            "longitude": -115.1523\n          },\n          "ticketPricing": "N/A",\n          "travelTimeFromHotel": "15-30 minutes (depending on hotel and transportation)",\n          "duration": "Allow ample time for travel and security"\n        }\n      ]\n    }\n  },\n  "transportation": {\n    "options": [\n      "Bus (Deuce or SDX): Affordable way to get around the Strip and downtown.",\n      "Rideshare (Uber/Lyft): Convenient but can be surge pricing during peak times.",\n      "Walking: Best for exploring specific areas of the Strip.",\n      "Monorail: Runs along the east side of the Strip, but doesn\'t go to the airport or downtown."\n    ],\n    "recommendation": "Combination of bus and walking for budget travelers."\n  },\n  "food": {\n    "budgetTips": [\n      "Eat at off-Strip restaurants for cheaper meals.",\n      "Take advantage of happy hour specials.",\n      "Look for buffets (some are reasonably priced).",\n      "Consider bringing snacks and drinks from home."\n    ],\n    "restaurantSuggestions": [\n     "In-N-Out Burger (local fast food)",\n      "Secret Pizza (Cosmopolitan - late-night option)",\n      "Ellis Island Casino (cheap steak special)"\n    ]\n  },\n  "importantNotes": [\n    "Las Vegas can be very hot, especially in the summer.  Stay hydrated and wear sunscreen.",\n    "Be aware of your surroundings and keep your belongings safe.",\n    "Tip generously for good service.",\n    "Book hotels and shows in advance, especially if traveling during peak season."\n  ]\n}\n```\n\n**Key Improvements and Explanations:**\n\n*   **JSON Format:** The entire response is now correctly formatted as JSON, making it easy to parse and use in applications.\n*   **Hotel Options:**  Includes three hotel options with prices, images, coordinates, ratings, and descriptions.  Prices are ranges as they fluctuate.\n*   **Detailed Itinerary:**  Each day of the itinerary includes:\n    *   `theme`:  A general theme for the day.\n    *   `bestTimeToVisit`:  General guidance for timing.\n    *   `activities`: An array of activities, each with:\n        *   `placeName`:  The name of the location.\n        *   `placeDetails`: A brief description of the location.\n        *   `placeImageUrl`: A URL to an image of the location.\n        *   `geoCoordinates`: Latitude and longitude coordinates.\n        *   `ticketPricing`: Information about ticket costs (if any).  Includes "Free" where applicable.\n        *   `travelTimeFromHotel` or `travelTimeFromPrevious`: Estimated travel time between locations.\n        *   `duration`: Estimated time to spend at the location.\n        *   `bestTimeToVisit`: Specific time of day recommended for the activity.\n*   **Budget Focus:**  The itinerary is designed to minimize costs, emphasizing free attractions and suggesting transportation options.\n*   **Transportation:** Added a `transportation` section with options and recommendations.\n*   **Food:**  Included a `food` section with budget tips and restaurant suggestions.\n*   **Important Notes:**  Added a section with general travel advice for Las Vegas.\n*   **Realistic Time Estimates:** The travel times and durations are more realistic.\n*   **Geo-Coordinates:** Included geo-coordinates for each location.\n*   **Image URLs:**  Included relevant image URLs for each location.\n*   **Flexibility:**  The `dates` field is marked as "Flexible" to indicate that the itinerary can be adapted to different travel dates.\n*   **Amenities:** Added hotel amenities\n*   **Clear Instructions**\n*   **Realistic Pricing**\n\nThis JSON structure provides a well-organized and comprehensive travel plan for a budget-conscious couple visiting Las Vegas.  Remember to double-check prices and availability before booking anything.\n',
        },
      ],
    },
  ],
});
